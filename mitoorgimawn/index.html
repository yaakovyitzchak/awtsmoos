B"H
<br>
<link rel="stylesheet" href="./sifareem/toyareem.css">
<title>Mitoorgimawn - AWTSMOOS</title>
<a href="https://awtsmoos.com">
<h1>
    AWTSOOS
    Mitoorgimawn
</h1></a>
<a href="./sifareem"><h4>
    Awtsmoos Sifareem (translated books)
    in progress
</h4></a>
<h3>(translator)</h3>
<a href="https://platform.openai.com/account/api-keys">
<h4>Your OpenAi API key:</h4></a>
<p>(Will not be sent anywhere except the OpenAI api,
    check source code if u want to verify)
</p>
<input type="text" id="apiKey">
<br>
<input type="checkbox" id="rm">
<label for="rm">
    Remember my API key on this computer
    (can be cleared in cache)
</label>
<br>
<h3>Content of Hebrew paragraph to translate word for word:</h3>
<textarea id="ok" rows="15" cols="40"></textarea>
<br>
<button id="well">Translate</button>
<p id="out" contenteditable>

</p>

<h3>(Or just use the OpenAI playground or ChatGPT etc.
    with the following prompt per paragraph (paste hebrew text after):
</h3>
<p id="promptInfo" contenteditable>

</p>

<script>


//B"H
var prompt = `B"H

Please translate the following Hebrew text into English, 

providing a word-by-word translation with the root, 
prefixes/suffixes, 

and any other relevant information for each word. 

this word for word translation should be in list format, for example

{Hebrew Word}: "meaning", root: {root}, prefixes/suffixes: ל - to 

(replace with actual values^^, that's just an example)

remember, after saying the meaning of the word in quotes like "meaning", say afterwards (in short hand if u need to) 

then give me the root of the word

then say the hebrew letter of them followed by their meaning, like ל - to.



After each general phrase (which is itself a collection of words), please provide a summary of the meaning of the phrase in natural language.

Please first break up each paragraph into smaller phrases before providing a word-by-word translation for each phrase.

In general you can decide when to break up the text, but if there is a paragraph break in the original, it should be broken there always.

When you are breaking up the text into smaller parts, then provide the natural language summary after each part (collection of words) rather than at the end of the entire translation etc..

remember the steps are:

break down into smaller sentences / phrases

within each phrase:
    break each phrase into words

    within each word:
        give its "meaning", followed by
        other info as mentioned above^
        (root, prefixes/suffixes/notes)

        don't forget the root

        don't forget to do each word in 
        addition to each phrase

        don't forget to summarize each phrase at the end 
        of each word for word, and to summarize the whole thing (all phrases) at end

do not do ALL word for word and summarize at end, break up into smaller phrases, as mentioned, and summarize each phrase in addition to each word, then summarize all phrases at end.
`

promptInfo.innerText=prompt
if(localStorage._awtsmoosApiToorgimawn) {
    if(!apiKey.value) {
        apiKey.value = localStorage._awtsmoosApiToorgimawn
    }
}

well.onclick = () => {
    if(!apiKey.value) {
        var ms = "You need an API key!"
        console.log(ms)
        out.innerHTML = ms;
        return;
    }

    if(rm.checked) {
        localStorage._awtsmoosApiToorgimawn
        =
        apiKey.value;
    }
    

    out.innerHTML = "processing.."
    txt(ok.value, r => {
        out.innerHTML = r.choices[0].message.content
    })
};

function txt(choot, cb=()=>{}, er=()=>{}) {
    
    console.log("processing", choot, "with API key", apiKey.value)
    fetch("https://api.openai.com/v1/chat/completions", {
        headers: {
            "Authorization": "Bearer " + apiKey.value,
            "Content-Type":"application/json",
        },
        method: "POST",
        body: JSON.stringify({
            model: "gpt-3.5-turbo",
            messages: [
                {
                    role: "user",
                    content: `
                        ${prompt}
                        
                        ${choot}
                    `
                }
            ]
        })
    }).then(r=>r.json())
    .then(g=>{
        w=g;
        console.log(g)
        cb(g)
    })
}
</script>
